files:
  "/etc/cron.d/my_cron_job":
    mode: "000644"
    owner: root
    group: root
    content: |
      SHELL=/bin/bash
      PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

      # ---------------------------------------------------------
      # [Iceage] 주식 정보 & 시그널리스트
      # ---------------------------------------------------------
      # 1. 시그널리스트 모닝 브리핑 (매일 아침 07:00 KST)
      # UTC: 전날 22:00
      00 22 * * * root bash /var/app/current/run_iceage.sh

      # 2. KRX 데이터 3종 3일치 수집 (임시: 오늘/매일 13:35 KST에 실행)
      # KST 13:35 = UTC 04:35
      35 04 * * * root bash -lc 'set -a; . /opt/elasticbeanstalk/deployment/env; set +a; bash /var/app/current/run_krx_batch.sh' >> /var/log/krx_batch.log 2>&1

      # ---------------------------------------------------------
      # [Moneybag] 코인 리포트
      # ---------------------------------------------------------
      # 3. 머니백 모닝 리포트 (매일 아침 07:30 KST)
      # UTC: 전날 22:30
      30 22 * * * root bash /var/app/current/run_moneybag.sh morning

      # 4. 머니백 나이트 리포트 (임시: 오늘/매일 13:40 KST에 실행)
      # KST 13:40 = UTC 04:40
      40 04 * * * root bash -lc 'set -a; . /opt/elasticbeanstalk/deployment/env; set +a; bash /var/app/current/run_moneybag.sh night' >> /var/log/moneybag_night.log 2>&1

      # (마지막 빈 줄 필수 - 지우지 마세요)

commands:
  remove_old_cron:
    command: "rm -f /etc/cron.d/my_cron_job.bak"
