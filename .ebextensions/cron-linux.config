files:
  "/etc/cron.d/my_cron_job":
    mode: "000644"
    owner: root
    group: root
    content: |
      # 매일 한국시간 16:10 (UTC 07:10)에 실행
      # 웹(curl)을 통하지 않고 파이썬을 직접 실행해서 타임아웃 원천 차단
      42 7 * * * root cd /var/app/current && /var/app/venv/*/bin/python -m iceage.src.pipelines.daily_runner >> /var/log/my_cron.log 2>&1

      # 권한 설정 (로그 파일 쓸 수 있게)
      # 00 00 * * * root touch /var/log/my_cron.log && chmod 666 /var/log/my_cron.log

commands:
  remove_old_cron:
    command: "rm -f /etc/cron.d/my_cron_job.bak"