files:
  "/etc/cron.d/my_cron_job":
    mode: "000644"
    owner: root
    group: root
    content: |
      SHELL=/bin/bash
      PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

      # ---------------------------------------------------------
      # [Iceage] 주식 정보 & 시그널리스트
      # ---------------------------------------------------------
      # 1. 시그널리스트 모닝 브리핑 (매일 아침 07:00 KST)
      # KST 07:00 = UTC 22:00 (전날)
      25 06 * * * root bash /var/app/current/run_iceage.sh

      # 2. KRX 데이터 3종 3일치 수집 (매일 저녁 20:00 KST)
      # KST 20:00 = UTC 11:00 (당일)
      00 11 * * * root bash -lc 'echo "[START krx] $(date -Is)"; set -a; . /opt/elasticbeanstalk/deployment/env; set +a; bash /var/app/current/run_krx_batch.sh; rc=$?; echo "[END krx] $(date -Is) rc=$rc"; exit $rc' >> /var/log/krx_batch.log 2>&1

      # ---------------------------------------------------------
      # [Moneybag] 코인 리포트
      # ---------------------------------------------------------
      # 3. 머니백 모닝 리포트 (매일 아침 07:30 KST)
      # KST 07:30 = UTC 22:30 (전날)
      30 22 * * * root bash /var/app/current/run_moneybag.sh morning

      # 4. 머니백 나이트 리포트 (매일 저녁 21:00 KST)
      # KST 21:00 = UTC 12:00 (당일)
      15 06 * * * root bash -lc 'echo "[START moneybag_night] $(date -Is)"; set -a; . /opt/elasticbeanstalk/deployment/env; set +a; bash /var/app/current/run_moneybag.sh night; rc=$?; echo "[END moneybag_night] $(date -Is) rc=$rc"; exit $rc' >> /var/log/moneybag_night.log 2>&1

      # (마지막 빈 줄 필수 - 지우지 마세요)

commands:
  remove_old_cron:
    command: "rm -f /etc/cron.d/my_cron_job.bak"
